#include "lcd.h"
#include "utility.h"
#include "xbee.h"
#include "drivers/mss_uart/mss_uart.h"

int race_status;

int main() {
	LCD_init();
	XBEE_init();

	while(1) {
		LCD_showRaceIntro();

		while (race_status == 0);

		LCD_countdown();

		// Broadcast the race status
		XBEE_send("0,1");

		LCD_startTimer();

		int leaderboard_shown = 0;

		while (race_status == 1) {
			if (!leaderboard_shown && (p1lap || p2lab)) {
				LCD_showLeaderboard();
				leaderboard_shown = 1;
			}

		}
	}
}
